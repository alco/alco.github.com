(function(){"use strict";var a=typeof window!="undefined"?window:global;if(typeof a.require=="function")return;var b={},c={},d=function(a,b){return{}.hasOwnProperty.call(a,b)},e=function(a,b){var c=[],d,e;/^\.\.?(\/|$)/.test(b)?d=[a,b].join("/").split("/"):d=b.split("/");for(var f=0,g=d.length;f<g;f++)e=d[f],e===".."?c.pop():e!=="."&&e!==""&&c.push(e);return c.join("/")},f=function(a){return a.split("/").slice(0,-1).join("/")},g=function(b){return function(c){var d=f(b),g=e(d,c);return a.require(g,b)}},h=function(a,b){var d={id:a,exports:{}};return c[a]=d,b(d.exports,g(a),d),d.exports},i=function(a,f){var g=e(a,".");f==null&&(f="/");if(d(c,g))return c[g].exports;if(d(b,g))return h(g,b[g]);var i=e(g,"./index");if(d(c,i))return c[i].exports;if(d(b,i))return h(i,b[i]);throw new Error('Cannot find module "'+a+'" from '+'"'+f+'"')},j=function(a,c){if(typeof a=="object")for(var e in a)d(a,e)&&(b[e]=a[e]);else b[a]=c},k=function(){var a=[];for(var c in b)d(b,c)&&a.push(c);return a};a.require=i,a.require.define=j,a.require.register=j,a.require.list=k,a.require.brunch=!0})(),require.register("common",function(a,b,c){function d(a){return Math.min(5,Math.max(1,Math.floor(a/10)))}function e(a,b){return a+Math.floor(Math.random()*(b-a+1))}function f(a,b,c){return(a+Math.random()*(b-a)).toFixed(c)}function g(a,b){var c=10;for(var d=1;d<b;d++)c*=10;return Math.round(a*b)/b}c.exports.getColumnCount=d,c.exports.toFixed=g,c.exports.randomInt=e,c.exports.randomRange=f}),require.register("generator",function(a,b,c){function e(a,c,d,e,g){var h={left:a,right:c,op:d},i=f(h,e,g),j=b("templates/table");$("#test-container").append(j(i))}function f(a,b,c){var d=[],e=Math.floor(b/c);for(var f=0;f<e;f++)d.push([]);var g=h(a,b);return _.each(g,function(a,b){d[b%e].push({text:a,index:b+1})}),{rows:d}}function h(a,b){var c=g.exec(a.left),d=g.exec(a.right),e=[];for(var f=0;f<b;f++){var h;h=j(c)+" "+a.op+" "+j(d),e.push(h)}return e}function j(a){var b=a[1],c=a[2];if(c===undefined)return parseFloat(b.replace(/,/g,"."));var e=[b,c],f=0;return _.each(e,function(a){var b=i.exec(a);b!=null&&(f=Math.max(f,b[1].length))}),(""+d.randomRange(parseFloat(b.replace(/,/g,".")),parseFloat(c.replace(/,/g,".")),f)).replace(/\./g,",")}var d=b("common"),g=/([0-9,]+)\s*(?:-\s*([0-9,]+))?/,i=/[0-9]+,([0-9]+)/;c.exports.populateTestTable=e}),require.register("generator_ui",function(a,b,c){var d=b("common"),e=b("generator");$(function(){$("#generate-but").click(function(){var a=$("#left-range").val(),b=$("#right-range").val(),c=$("#operation").val(),f=parseInt($("#test-count").val());$("#test-container").empty();var g=d.getColumnCount(f);e.populateTestTable(a,b,c,f,g)}),$("#print-but").click(function(){window.print()})})}),require.register("runner",function(exports,require,module){function populateTestTypes(a){a.empty(),_.each(testTypes,function(b){a.append($("<option/>").text(b))})}function populateTestTable(a,b,c,d){var e=generateTestTable(a,b,c,d),f=require("templates/table"),g=require("templates/result");$("#test-container").append(f(e)),$("#test-container td input").last().data("lastField",!0),$("input").keypress(function(a){if(a.keyCode==13){var b=$(this);if(isLastField(b)){var c=$("table td"),d=c.find("input");d.prop("disabled",!0);var e=$("#test-container").data("test"),f=checkResults(e,c);$("#test-container").append(g(f))}else{var h=parseInt(b.attr("tabindex"))+1;$("[tabindex="+h+"]").focus()}}})}function generateTestTable(a,b,c,d){var e=[],f=Math.floor(b/c);for(var g=0;g<f;g++)e.push([]);var h=generateTests(a,b,d);return _.each(h,function(a,b){e[b%f].push({text:a,index:b+1})}),{rows:e}}function generateTests(a,b,c){var d=testTypeRe.exec(a),e=d[1],f=d[3],g=d[2],h=[],i=generateNumber(e),j=generateNumber(f);for(var k=0;k<b;k++){var l;c=="left"?l=i+" "+g+" "+generateNumber(f):c=="right"?l=generateNumber(e)+" "+g+" "+j:l=generateNumber(e)+" "+g+" "+generateNumber(f),h.push(l)}return h}function generateNumber(a){var b="";if(a=="0,00")return"0,"+common.randomInt(1,9)+common.randomInt(1,9);for(var c=0;c<a.length;c++){var d;c==0&&(a.length>1&&a[1]!=","||a.length==1)?d=1:d=0,a[c]=="0"?b+=common.randomInt(d,9):b+=a[c]}return b}function toFixedTime(a,b){var c=common.toFixed(a,b);return a<10?"0"+c:c}function isLastField(a){return a.data("lastField")}function checkResults(a,b){var c=0;b.each(function(a,b){var b=$(b);correctAnswer(b.text(),b.find("input").val())||(c++,b.css("color","red"))});var d=a.count-c,e=new Date-a.time;return{testCount:a.count,correctCount:d,errorCount:c,percentCorrect:(""+common.toFixed(d/a.count*100,2)).replace(/\./g,","),elapsedTime:formatTimeDiff(e/1e3)}}function correctAnswer(text,answer){var text=text.replace(/,/g,".").replace("x","*").replace("=",""),num=eval(text);return num==parseFloat(answer)}function formatTimeDiff(a){if(a<60)return("0:"+toFixedTime(a,2)).replace(/\./g,",");if(a<3600)return(Math.floor(a/60)+":"+toFixedTime(a%60,2)).replace(/\./g,",")}var common=require("common"),testTypes=["0 + 0","00 + 0","00 + 00","0 - 0","00 - 0","00 - 00","0 x 0","00 x 0","00 x 00","000 x 0","0 x 0,0","00 x 0,00","0,0 x 0,0","0,00 x 0,00"],testTypeRe=/([0,]+)\s*([+-x])\s*([0,]+)/;module.exports.populateTestTypes=populateTestTypes,module.exports.populateTestTable=populateTestTable}),require.register("runner_ui",function(a,b,c){var d=b("common"),e=b("runner");$(function(){var a=$("#test-types");e.populateTestTypes(a),$("#start-but").click(function(){$("#test-container").empty();var a=$("#test-types").val(),b=parseInt($("#test-count").val()),c=d.getColumnCount(b);e.populateTestTable(a,b,c,$("#fix-column").val()),$("[tabindex=1]").focus(),$("#test-container").data("test",{count:b,time:new Date})})})}),require.register("templates/result",function(a,b,c){c.exports=Handlebars.template(function(a,b,c,d,e){c=c||a.helpers;var f="",g,h,i=this,j="function",k=c.helperMissing,l=void 0,m=this.escapeExpression;return f+="<hr>\n<h3>Результат:</h3>\n<table>\n<tr><td>Всего тестов:</td><td>",h=c.testCount,g=h||b.testCount,typeof g===j?g=g.call(b,{hash:{}}):g===l&&(g=k.call(b,"testCount",{hash:{}})),f+=m(g)+"</td></tr>\n<tr><td>Затрачено времени:</td><td>",h=c.elapsedTime,g=h||b.elapsedTime,typeof g===j?g=g.call(b,{hash:{}}):g===l&&(g=k.call(b,"elapsedTime",{hash:{}})),f+=m(g)+"</td></tr>\n<tr><td>Правильных ответов:</td><td>",h=c.correctCount,g=h||b.correctCount,typeof g===j?g=g.call(b,{hash:{}}):g===l&&(g=k.call(b,"correctCount",{hash:{}})),f+=m(g)+"</td></tr>\n<tr><td>Ошибок:</td><td>",h=c.errorCount,g=h||b.errorCount,typeof g===j?g=g.call(b,{hash:{}}):g===l&&(g=k.call(b,"errorCount",{hash:{}})),f+=m(g)+"</td></tr>\n<tr><td>Процент правильных ответов:</td><td>",h=c.percentCorrect,g=h||b.percentCorrect,typeof g===j?g=g.call(b,{hash:{}}):g===l&&(g=k.call(b,"percentCorrect",{hash:{}})),f+=m(g)+"%</td></tr>\n</table>\n",f})}),require.register("templates/table",function(a,b,c){c.exports=Handlebars.template(function(a,b,c,d,e){function p(a,b){var d="",e,f;d+="\n<tr>\n  ",e=a,f=c.each,j=k.program(2,q,b),j.hash={},j.fn=j,j.inverse=k.noop,e=f.call(a,e,j);if(e||e===0)d+=e;return d+="\n</tr>\n",d}function q(a,b){var d="",e;return d+="\n  <td>",i=c.text,e=i||a.text,typeof e===l?e=e.call(a,{hash:{}}):e===n&&(e=m.call(a,"text",{hash:{}})),d+=o(e)+' = <input type="text" tabindex="',i=c.index,e=i||a.index,typeof e===l?e=e.call(a,{hash:{}}):e===n&&(e=m.call(a,"index",{hash:{}})),d+=o(e)+'"></td>\n  ',d}c=c||a.helpers;var f="",g,h,i,j,k=this,l="function",m=c.helperMissing,n=void 0,o=this.escapeExpression;f+='<hr>\n<table border="0">\n',i=c.rows,g=i||b.rows,h=c.each,j=k.program(1,p,e),j.hash={},j.fn=j,j.inverse=k.noop,g=h.call(b,g,j);if(g||g===0)f+=g;return f+="\n</table>\n",f})})